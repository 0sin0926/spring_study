# 스프링 빈과 의존관계
 
### 의존
회원 controller가 회원 service와 repository를 이용해 회원가입하고, 조회를 함
=> 의존 관계에 있다

### @Controller 작동 과정
1. 처음에 spring을 실행할 때 spring container라는 통이 하나 생긴다
2. @Controller annotation이 있으면, container에 memberController(밑에 나오는 class) 객체를 생성해서 넣어둠
3. 그 뒤에 spring이 관리 (= spring 빈이 관리된다)


### spring bean 의존관계
- memberController -> memberService -> memberRepository

### 스프링 빈 등록하는 방법 : component 스캔과 자동 의존관계 설정
1. 일단 spring이 memberService와 repository를 인식하게 하기 위해 
   각각 @Service, @Repository annotation을 클래스 맨 위에 붙여준다.
   controller 위에 @Controller하는 것도 마찬가지 이유
    => 원래는 @Component라고 쓰면 됨. // service, repo에 @component가 포함돼있음

2. controller와 service 위에 @Autowired를 작성하면,
  스프링이 controller는 스프링 빈에 있는 service 객체와, service는 repository 객체를 매핑시킨다.

3. 스프링 컨테이너에 스프링 빈을 등록할 때는 기본적으로 싱글톤
   : 리포지토리에 의존하는 게 service말고 다른 게 하나 더 있었어도 그거에 배치해주는 
     bean 객체는 하나라는 뜻
    = 같은 타입의 bean이 여러 클래스에 주입되더라도, 컨테이너는 동일한 객체 인스턴스를 공유해서 주입한다.
